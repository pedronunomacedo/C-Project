<a name="readme-top"></a>
<!-- PROJECT LOGO -->
<br />
<div align="center">
  <h3 align="center">FEUP COMP - Compiler</h3>
</div>



<!-- TABLE OF CONTENTS -->
<details>
  <summary>Table of Contents</summary>
  <ol>
    <li>
      <a href="#about-the-project">About The Project</a>
      <ul>
        <li><a href="#built-with">Built With</a></li>
      </ul>
    </li>
    <li>
      <a href="#getting-started">Getting Started</a>
      <ul>
        <li><a href="#installation">Installation</a></li>
      </ul>
    </li>
    <li><a href="#usage">Usage</a></li>
    <li><a href="#contributions">Contributions</a></li>
    <li><a href="#self-assessement">Self Assessement</a></li>
    <li><a href="#extra-features">Extra Features</a></li>
    <li><a href="#more-info">More Info</a></li>
  </ol>
</details>



<!-- ABOUT THE PROJECT -->
## About The Project

During this project, we developed a jmm compiler. The jmm compilation flow has 4 important stages:
* **Parsing**: Where the jmm input file is parsed, and the AST is generated. 
* **Semantic Analysis**: Where the AST is analyzed semantically and a symbol table is generated.
* **High-and-low-level-optimization**: High level optimizations are applied to the AST (for example, constant folding and constant propagation), OLLIR is generated, and low-level optimizations are applied to OLLIR.
* **Code generation**: The result Jasmin code is generated by the OLLIR output from the previous phase.

<div align="center">
    <img src="images/compiler_stages.png " alt="compiler Stages file">
<div/>
<p align="right">(<a href="#readme-top">back to top</a>)</p>



### Built With
<img src="https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=java&logoColor=white" alt="Java">

<p align="right">(<a href="#readme-top">back to top</a>)</p>


<!-- GETTING STARTED -->
## Getting Started
<div align="left">
<p>To get a local copy up and running follow these simple steps.</p>
</div>

### Installation
<div align="left">
<p>Below is an example of how you can instruct your audience on installing and setting up your app. This template doesn't rely on any external dependencies or services._</p>
</div>
<br />

<div align="left">
1. Clone the repo

   ```sh
   git clone https://git.fe.up.pt/compilers2023/comp2023-4c.git
   ```
2. Inside the IntelliJ, make sure you go to **File > Project Structure > Libraries (on the side menu)**. Click on the **+** icon, then select the Java option. Then go to the **libs** folder and select all libraries files that are located in this directory. Click Open, and then Apply.

3. Your project will rebuild after this. 

4. Then, go to the Launcher file, and start the Launcher class. **NOTE**: If you see an error saying that "there was no file found", go to the right top corner, select _Launcher_, then the option _Edit configurations_, and in the _Program arguments_ field put the following. 

```txt
-i=<filename> [-o] [-d] [-r=<num>]
```
**-i=\<filename>**: Youcan use the input file name you like, but you can also use yours (_input.txt_);

**-o**: Refers to the optimization steps

**-d**: Refers to the debug guidelines. 

**-r[\<num>]**: Directs the compiler to use only the first **\<num>** local variables of the JVM when assigning the local variables

5. Finally, you will have all dependencies you need to start using your project.

<p align="right">(<a href="#readme-top">back to top</a>)</p>

</div>

<!-- USAGE EXAMPLES -->
## Usage

<div align="left">

- Using the **input.txt**, you can input your jmm code, and see the result by pressing the **_Play_** button on the right top corner.

</div>

<img src="images/input_txt_file.png " alt="input.txt file" width="400px">

<p></p>

<p align="right">(<a href="#readme-top">back to top</a>)</p>


<!-- CONTRIBUTIONS -->
## Contributions

| Name                  | Number      | Contributions
| -----------           | ----------- | -------------
| Gonçalo Ferreira      | 202004761   | 30%
| Gonçalo Domingues     | 202007914   | 30%
| Pedro Macedo.         | 202007531   | 40%

<p align="right">(<a href="#readme-top">back to top</a>)</p>

<!-- SELF ASSESSMENT -->
## Self Assessement
During this project, all elements of the group have demonstrated constant dedication and hard work. Taking into account the results obtained in the previous checkpoints, and the fact that we almost got all optimizations and did extra features, we believe we deserve at least 18.

<p align="right">(<a href="#readme-top">back to top</a>)</p>

<!-- EXTRA FEATURES -->
## Extra Features

<div align="left">

1. You can do inline declaration followed by an assignment.

2. You can develop more complex expression like, for example:

</div>

```java
int res = obj.test(10)[obj.getNum()]; // you can found this in the inout.txt file, inside the project root directory
```

<p align="right">(<a href="#readme-top">back to top</a>)</p>

<!-- CONTACT -->
## More Info

Unit link: [https://sigarra.up.pt/feup/pt/ucurr_geral.ficha_uc_view?pv_ocorrencia_id=501688](https://sigarra.up.pt/feup/pt/ucurr_geral.ficha_uc_view?pv_ocorrencia_id=501688)

Project Link: [https://git.fe.up.pt/compilers2023/comp2023-4c](https://git.fe.up.pt/compilers2023/comp2023-4c)

<p align="right">(<a href="#readme-top">back to top</a>)</p>
